#apiVersion: apps/v1
#kind: StatefulSet
#metadata:
#  name: notebook
#spec:
#  selector:
#    matchLabels:
#      app: assemblyline
#      section: core
#      component: notebook
#  serviceName: notebook
#  replicas: 1
#  template:
#    metadata:
#      labels:
#        app: assemblyline
#        section: core
#        component: notebook
#    spec:
#      serviceAccountName: {{ .Release.Name }}-scaling-manager
#      terminationGracePeriodSeconds: 10
#      priorityClassName: al-infra
#      containers:
#      - name: notebook
#        image: cccs/assemblyline_management:latest
#        env:
#          - name: NB_PASSWORD
#            value: {{ .Values.notebookPassword }}
#        ports:
#        - containerPort: 8888
#        volumeMounts:
#        - name: notebook-files
#          mountPath: /var/lib/assemblyline/jupyter
#        - name: al-config
#          mountPath: /etc/assemblyline/
#        - name: old-filestore
#          mountPath: /media/filestore
#        resources:
#          requests:
#            memory: 128Mi
#            cpu: 0.5
#          limits:
#            memory: 1Gi
#      volumes:
#        - name: al-config
#          configMap:
#            name: {{ .Release.Name }}-global-config
#            items:
#                - key: config
#                  path: config.yml
#                - key: classification
#                  path: classification.yml
#        - name: old-filestore
#          persistentVolumeClaim:
#            claimName: filestore-data-filestore-0
#  volumeClaimTemplates:
#  - metadata:
#      name: notebook-files
#    spec:
#      accessModes: [ "ReadWriteOnce" ]
#      storageClassName: azurefile-retained
#      resources:
#        requests:
#          storage: 50Gi
